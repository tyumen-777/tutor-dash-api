generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        Int       @id @default(autoincrement())
  firstName String?
  lastName  String?
  birthDate DateTime?
  email     String?   @unique()
  phone     String?
  gender    Gender    @default(MALE)
  role      UserRole

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  //Relations
  teachersInfo TeacherInfo?
  studentsInfo StudentInfo?

  @@map("users")
}

model StudentInfo {
  userId        Int            @id
  user          User           @relation(fields: [userId], references: [id])
  teacherId     Int?
  languageLevel LanguageLevel?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  //Relations
  teacher TeacherInfo? @relation(fields: [teacherId], references: [userId])

  @@map("students_info")
}

model TeacherInfo {
  userId Int  @id
  user   User @relation(fields: [userId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  //Relations
  students StudentInfo[]

  @@map("teachers_info")
}

enum Gender {
  MALE
  FEMALE
}

enum UserRole {
  TEACHER
  STUDENT
}

enum LanguageLevel {
  BEGINNER
  ELEMENTARY
  PRE_INTERMEDIATE
  INTERMEDIATE
  UPPER_INTERMEDIATE
  ADVANCED
}
